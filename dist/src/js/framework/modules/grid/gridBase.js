if("function"!=typeof define)var define=require("amdefine")(module);define(function(require){"use strict";var GridPage=("function"==typeof require?require("jquery-ui"):window.UI,"function"==typeof require?require("framework/modules/grid/gridPage"):window.GridPage),GridButton="function"==typeof require?require("framework/modules/grid/gridButton"):window.GridButton,GridBase=Backbone.View.extend({tagName:"div",className:"gridwrapper",template:"",model:void 0,tempmodel:[],gridButtons:[],totalPages:0,gridElements:null,initialize:function(options){this.model=options.data||{},this.gridElements=options.elements||9,this.createButtons(this.model)},createButtons:function(model){var self=this;if(model){var i=0;_.each(model,function(data){self.tempmodel[i]=new GridButton(data),self.gridButtons.push(self.tempmodel[i]),i++})}},getTotalPages:function(){return this.totalPages},destroy:function(){this.undelegateEvents(),this.unbind(),this.remove()},setupSelectable:function(){var self=this;this.$el.selectable({distance:1,filter:"div",selected:function(evt,ui){var cid=ui.selected.id,gridbtn=self.gridButtons[cid-1];gridbtn&&gridbtn._isSelected===!1&&gridbtn.selectedChanged()},unselected:function(evt,ui){var cid=ui.unselected.id,gridbtn=self.gridButtons[cid-1];gridbtn&&gridbtn._isSelected&&gridbtn.unselectedChanged()}})},getTemplate:function(){var self=this;return self.template=require("text!templates/modules/grid/gridBase.html"),self.template},render:function(){var j,self=this,tmp=[],i=0,tmpl=this.getTemplate(),markup=_.template(tmpl);for(self.$el.html(markup(self.model));i<self.gridButtons.length;)tmp.push(self.gridButtons[i]),0!==i&&(i+1)%self.gridElements===0&&(j=new GridPage(tmp),self.$el.find(".gridcontainer").append(j.render().el),tmp=[],self.totalPages++),i++;return self.gridButtons.length%self.gridElements!==0&&(j=new GridPage(tmp),self.$el.find(".gridcontainer").append(j.render().el),self.totalPages++),self.setupSelectable(),this}});return GridBase});